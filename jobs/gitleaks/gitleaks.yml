gitleaks:
  stage: sast
  allow_failure: true
  image: 
    name: "zricethezav/gitleaks:latest"
    entrypoint: [""]
  artifacts:
    when: always
    expire_in: 1 day
    paths:
      - $ARTIFACT_FOLDER/
  script: 
     - |
      mkdir $ARTIFACT_FOLDER
      gitleaks detect --exit-code 0 --verbose \
      --source $CI_PROJECT_DIR \
      --report-format json \
      --report-path $ARTIFACT_FOLDER/gitleaks_report.json